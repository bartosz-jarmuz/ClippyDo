<Window x:Class="ClippyDo.App.Wpf.Features.Picker.PickerWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:shell="clr-namespace:System.Windows.Shell;assembly=PresentationFramework"
        xmlns:local="clr-namespace:ClippyDo.App.Wpf.Features.Picker"
        Title="ClippyDo Picker"
        Width="640" Height="420"
        WindowStyle="None"
        ResizeMode="CanResize"
        ShowInTaskbar="False"           
  Topmost="True"
        AllowsTransparency="False">
  <!-- keep DWM/resize performance -->

  <!-- Enable proper resize grips/borders while window is borderless -->
  <shell:WindowChrome.WindowChrome>
    <shell:WindowChrome CaptionHeight="32"
                        ResizeBorderThickness="6"
                        UseAeroCaptionButtons="False"
                        GlassFrameThickness="0"
                        CornerRadius="0"/>
  </shell:WindowChrome.WindowChrome>

  <Border BorderBrush="#33000000" BorderThickness="1" Background="{DynamicResource {x:Static SystemColors.WindowBrushKey}}">
    <Grid>
      <Grid.RowDefinitions>
        <RowDefinition Height="32"/>
        <!-- title bar -->
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
      </Grid.RowDefinitions>

      <!-- Custom Title Bar (draggable) -->
      <Grid Grid.Row="0" Background="#11000000"
            MouseLeftButtonDown="TitleBar_OnMouseLeftButtonDown">
        <Grid.ColumnDefinitions>
          <ColumnDefinition/>
          <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>

        <TextBlock Text="ClippyDo" VerticalAlignment="Center" Margin="8,0,0,0" />

        <!-- Close button (hides to tray) -->
        <Button Grid.Column="1" Content="✕" Width="36" Height="24" Margin="0,4,4,4"
                Click="CloseButton_Click"
                ToolTip="Hide to tray"/>
      </Grid>

      <!-- Search + Clear -->
      <DockPanel Grid.Row="1" LastChildFill="True" Margin="8,8,8,6">
        <Button Content="×" Width="28" Height="28" Margin="0,0,6,0"
                Command="{Binding ClearQueryCommand}"/>
        <TextBox Text="{Binding Query, UpdateSourceTrigger=PropertyChanged}"
                 VerticalContentAlignment="Center" Height="28"/>
      </DockPanel>

      <!-- List -->
      <ListBox Grid.Row="2" Margin="8,0,8,8"
               ItemsSource="{Binding Items}"
               DisplayMemberPath="PlainText"/>
    </Grid>
  </Border>
</Window>
